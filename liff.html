const API_BASE = 'const API_BASE = 'https://script.google.com/macros/s/AKfycbwrSTJEfIBUdCbd4lWBxhx31qwOh-lOgM3wayw9nfALvl24Y0njJQAK2zAk94u3KGOdog/exec'; // 你的 GAS Web App URL

async function submitForm(e){
  e.preventDefault();
  const payload = {
    lineUserId,
    expenseDate: document.getElementById('expenseDate').value,
    amount: document.getElementById('amount').value,
    category: document.getElementById('category').value,
    merchant: document.getElementById('merchant').value,
    note: document.getElementById('note').value,
  };

  // 照片可先上傳到 imgur/S3，再把 URL 存到 Google Sheet
  const photoFile = document.getElementById('photo').files[0];
  payload.photoUrl = photoFile ? await uploadPhoto(photoFile) : null;

  const res = await fetch(API_BASE, {
    method: 'POST',
    body: JSON.stringify(payload),
  });
  const data = await res.json();
  if (data.ok) {
    alert('已送出！');
    if (liff.isInClient()) liff.closeWindow();
  } else {
    alert('送出失敗：' + data.error);
  }
}
'; // 你的 GAS Web App URL

async function submitForm(e){
  e.preventDefault();
  const payload = {
    lineUserId,
    expenseDate: document.getElementById('expenseDate').value,
    amount: document.getElementById('amount').value,
    category: document.getElementById('category').value,
    merchant: document.getElementById('merchant').value,
    note: document.getElementById('note').value,
  };

  // 照片可先上傳到 imgur/S3，再把 URL 存到 Google Sheet
  const photoFile = document.getElementById('photo').files[0];
  payload.photoUrl = photoFile ? await uploadPhoto(photoFile) : null;

  const res = await fetch(API_BASE, {
    method: 'POST',
    body: JSON.stringify(payload),
  });
  const data = await res.json();
  if (data.ok) {
    alert('已送出！');
    if (liff.isInClient()) liff.closeWindow();
  } else {
    alert('送出失敗：' + data.error);
  }
}
